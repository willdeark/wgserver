version: '3'

services:
  wgserver:
    container_name: wgserver
    build: .
    privileged: true
    restart: always
    tty: true
    sysctls:
      - 'net.ipv4.ip_forward=1'
    ports:
      - "5180:80"
      - '51820:51820/udp'
    environment:
      - "SERVER_URL=${SERVER_URL}"
      - "SERVER_KEY=${SERVER_KEY}"
      - "SERVER_PROT=5180"
    volumes:
      - './etc/www:/www'
      - './etc/lighttpd/:/etc/lighttpd'
      - './etc/wireguard:/etc/wireguard'
